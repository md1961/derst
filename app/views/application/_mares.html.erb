<table class="table_base">
  <thead>
    <tr>
      <th colspan="<%= @ranch ? 3 : 2 %>">
      <% mare_trait_names.each do |name| -%>
        <th><%= Mare.human_attribute_name(name) %></th>
      <% end -%>
      <th colspan="2">
    </tr>
  </thead>
  <tbody>
    <% @mares.each.with_index(1) do |mare, seq_num| -%>
      <% has_all_fathers = @entering_bloodline && mare.all_bloodline_father_present? -%>
      <tr>
        <td class="numeric">
          <%= link_to seq_num, mare_path(mare, ranch_id: @ranch), tabindex: has_all_fathers || @ranch ? -1 : 0 %>
        </td>
        <td style="<%= !@entering_bloodline || has_all_fathers ? '' : 'color: red' %>">
          <%= mare.name %>
        </td>
        <% ranch_mare = @ranch&.ranch_mares&.find_by(mare: mare) -%>
        <% if @ranch -%>
          <td class="numeric">
            <%= "#{ranch_mare.age}歳" %>
          </td>
        <% end -%>
        <% mare_trait_names.each do |name| -%>
          <td class="<%= %i[price speed stamina].include?(name) ? 'numeric' : 'centered' %>">
            <%= mare.send(name) %>
          </td>
        <% end -%>
        <td><%= link_to '配', matings_path(mare_id: mare, ranch_id: @ranch), target: '_blank', tabindex: -1 %></td>
        <% if @ranch -%>
          <td>
            <%= button_to '売却', ranch_mare, method: :delete, tabindex: -1,
                                    data: {confirm: "「#{mare.name}」を売却してよろしいですか?"} %>
          </td>
        <% end -%>
      </tr>
    <% end -%>
  </tbody>
</table>
