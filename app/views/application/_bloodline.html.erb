<%
  unless defined?(readonly)
    readonly = true
  end
-%>

<div class="application_bloodline">
  <%= form_with url: bloodline_update_path, local: true, method: :patch do |f| %>
    <table class="table_base">
      <tr>
        <td rowspan="8"><%= father_in_bloodline(horse, 1, 1, readonly) %></td>
        <td rowspan="4"><%= father_in_bloodline(horse, 2, 1, readonly) %></td>
        <td rowspan="2"><%= father_in_bloodline(horse, 3, 1, readonly) %></td>
        <td>            <%= father_in_bloodline(horse, 4, 1, readonly) %></td>
      </tr>
      <tr>
        <td>            <%= father_in_bloodline(horse, 4, 2, readonly) %></td>
      </tr>
      <tr>
        <td rowspan="2"><%= father_in_bloodline(horse, 3, 2, readonly) %></td>
        <td>            <%= father_in_bloodline(horse, 4, 3, readonly) %></td>
      </tr>
      <tr>
        <td>            <%= father_in_bloodline(horse, 4, 4, readonly) %></td>
      </tr>
      <tr>
        <td rowspan="4"><%= father_in_bloodline(horse, 2, 2, readonly) %></td>
        <td rowspan="2"><%= father_in_bloodline(horse, 3, 3, readonly) %></td>
        <td>            <%= father_in_bloodline(horse, 4, 5, readonly) %></td>
      </tr>
      <tr>
        <td>            <%= father_in_bloodline(horse, 4, 6, readonly) %></td>
      </tr>
      <tr>
        <td rowspan="2"><%= father_in_bloodline(horse, 3, 4, readonly) %></td>
        <td>            <%= father_in_bloodline(horse, 4, 7, readonly) %></td>
      </tr>
      <tr>
        <td>            <%= father_in_bloodline(horse, 4, 8, readonly) %></td>
      </tr>
    </table>

    <%= render partial: 'root_lineage_numbers', locals: {horse: horse} %>

    <%= hidden_field_tag :type, horse.class.name %>
    <%= hidden_field_tag :id  , horse.id %>

    <div class="submit">
      <% unless horse.all_bloodline_father_present? -%>
        <%= submit_tag %>
      <% end -%>
    </div>

    <%= render 'father_candidates' %>
  <% end -%>
</div>
